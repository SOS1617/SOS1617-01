<html ng-app="SSApp">

<head>
    <script type="text/javascript" src="/bower_components/angular/angular.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    
    
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
  

    <script>
        angular
            .module("SSApp", [])
            .controller("ChartCtrl", ["$http","$scope", function($http,$scope) {
                console.log("Controller chart intialized");
            
                $http
                    .get("/api/v2/startups-stats?apikey=sos161701")
                    .then(function(res) {
                      
 Highcharts.chart('charbar', {
    chart: {
        type: 'bar'
    },
    title: {
        text: 'Level of startups'
    },
    subtitle: {
        text: null
    },
    xAxis: {
        categories: res.data.map(function(d) {
            return d.country;
        }),
        title: {
            text: ''
        }
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Total ',
            align: 'high'
        },
        labels: {
            overflow: 'justify'
        }
    },
    tooltip: {
        valueSuffix: ' millions'
    },
    plotOptions: {
        bar: {
            dataLabels: {
                enabled: true
            }
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -40,
        y: 90,
        floating: true,
        borderWidth: 1,
        backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
        shadow: true
    },
    credits: {
        enabled: false
    },
    series: [{
       name: 'Total',
        data: res.data.map(function(d){
            return Number(d.total);
        })
    }]
});
                      
                        google.charts.load('current', {
                            'packages': ['geochart']
                        });
                        google.charts.setOnLoadCallback(drawRegionsMap);
                        function drawRegionsMap() {
                            var myData = [['Country','total']];
                         res.data.forEach(function (d){
                                myData.push([d.country,Number(d.total)]);
                                
                            });
                            var data = google
                                            .visualization
                                            .arrayToDataTable(myData);
                            var options = {colorAxis: {colors: ['green','green']}};
                            var chart = new google.visualization.GeoChart(
                                        document.getElementById('regions'));
                            chart.draw(data, options);
                        }
                        
                        
                    });
            }]);
    </script>
</head>

<body ng-controller="ChartCtrl">
    <h1>Highcharts</h1>
    <div id="charbar"></div>
   
    <h1>GeoChart</h1>
    <div id="regions" style="width: 900px; height: 500px;"></div>
    

</body>

</html>